{% extends "layouts/base.html" %}

{% block title %} Stream {% endblock %} 

<!-- Specific Page CSS goes HERE  -->
{% block stylesheets %}{% endblock stylesheets %}

{% block content %}

    <div class="panel-header panel-header-sm">
    </div>
    <div class="content">
      <div class="row">
        <div class="col-md-12">
          <div class="card">
            <div class="card-header">
              <h5 class="title">
                SPOC lab videostream
              </h5>
              <p class="category">
                  {% if experiment_name: %}
                    Experiment <b>{{experiment_name}}</b> selected<br>
                  {% endif %}
              </p>
            </div>
            <div class="card-body">
              <!-- <div class="row">
                <div class="col-md-12">
                    Add more content here      
                </div>
              </div> -->

              <div class="automatic-info">
                <div class='status'>Automatic On</div>
              </div>

              <img src="{{ url_for('video_feed') }}">
              <br>
              {% for line in experiment_positions %}
                {{line}}<br>
              {% endfor %}

              <div class="navbar">
              
                <form method = "post">
                  <div class="camera-movement">
                    <a href=# id=5000left>
                      <button>                   
                        <i class="fa fa-arrow-left fa" style="color: rgb(0, 87, 63);" aria-hidden="true"></i>
                      </button>
                    </a>
                    <a href=# id=5000up>
                      <button>                   
                        <i class="fa fa-arrow-up fa" style="color: rgb(0, 87, 63);" aria-hidden="true"></i>
                      </button>
                    </a>
                    <a href=# id=5000right>
                      <button>                  
                        <i class="fa fa-arrow-right fa" style="color: rgb(0, 87, 63);" aria-hidden="true" ></i>
                      </button>
                    </a>
                    <a href=# id=5000down>
                      <button>                  
                        <i class="fa fa-arrow-down fa" style="color: rgb(0, 87, 63);" aria-hidden="true" ></i>
                      </button>
                    </a>

                    <a href=# id=nextleft>
                      <button>                   
                        <i class="fa fa-long-arrow-left fa" style="color: rgb(0, 87, 63);" aria-hidden="true"></i>
                      </button>
                    </a>
                    <a href=# id=nextup>
                      <button>                   
                        <i class="fa fa-long-arrow-up fa" style="color: rgb(0, 87, 63);" aria-hidden="true"></i>
                      </button>
                    </a>
                    <a href=# id=nextright>
                      <button>                  
                        <i class="fa fa-long-arrow-right fa" style="color: rgb(0, 87, 63);" aria-hidden="true" ></i>
                      </button>
                    </a>
                    <a href=# id=nextdown>
                      <button>                  
                        <i class="fa fa-long-arrow-down fa" style="color: rgb(0, 87, 63);" aria-hidden="true" ></i>
                      </button>
                    </a>

                    <a href=# id=href_zoom_in>
                      <button>                  
                        <i class="fa fa-search-plus fa" style="color: rgb(0, 87, 63);" aria-hidden="true" ></i>
                      </button>
                    </a>
                    <a href=# id=href_zoom_out>
                      <button>                  
                        <i class="fa fa-search-minus fa" style="color: rgb(0, 87, 63);" aria-hidden="true" ></i>
                      </button>
                    </a>
                    <a href=# id=href_add_position>
                      <button> 
                        <i class="fa-plus fa" style="color: rgb(0, 87, 63);" aria-hidden="true" ></i>
                      </button>
                    </a>
                    <a href=# id=picture>
                      <button>                  
                        <i class="fa-camera fa" style="color: rgb(0, 87, 63);" aria-hidden="true" ></i>
                      </button>
                    </a>
                    <a href=# id=yolo-search-go>
                      <button>                  
                        <i class="fa-eye fa" style="color: rgb(0, 87, 63);" aria-hidden="true" ></i>
                      </button>
                    </a>
                    <a href=# id=led>
                      <button>                  
                        <i class="fa-lightbulb-o  fa" style="color: rgb(0, 87, 63);" aria-hidden="true" ></i>
                      </button>
                    </a>
                    <!-- this makes round toggle buttons -->
                    <a href=# id=toggle-switch>
                      <button>   
                      <!-- <style>
                        .toggle.ios, .toggle-on.ios, .toggle-off.ios { border-radius: 1px; }
                        .toggle.ios .toggle-handle { border-radius: 1px; }
                      </style> -->
                      <input type="checkbox" class='toggle' checked data-toggle="toggle" data-onstyle="success" data-style="ios">
                      </button>
                    </a>
                    
                  </div>
          
                </form>
              
              </div>

              <!-- end of new content -->
            </div>
          </div>
        </div>
      </div>
    </div>

{% endblock content %}

<!-- Specific Page JS goes HERE  -->
{% block javascripts %}

  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">  

<!-- variable for automatic -->


  <!-- some javascript -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
  <script type=text/javascript>
  $(function() {
    
    //json - parse to Python
    // Motor - 0°
    $('a#5000left').bind('click', function() {
      $.getJSON('/move_deg?xyz_position=0&xyz_position=5000&xyz_position=0',
          function(data) {
        //do nothing
      });
      return false;
    });
    // - Motor - 90°
    $('a#5000up').bind('click', function() {
      $.getJSON('/move_deg?xyz_position=5000&xyz_position=0&xyz_position=0',
          function(data) {
        //do nothing
      });
      return false;
    });
    // - Motor - 180°
    $('a#5000right').bind('click', function() {
      $.getJSON('/move_deg?xyz_position=0&xyz_position=-5000&xyz_position=0',
          function(data) {
        //do nothing
      });
      return false;
    });
    // - Motor - 270°
    $('a#5000down').bind('click', function() {
      $.getJSON('/move_deg?xyz_position=-5000&xyz_position=0&xyz_position=0',
          function(data) {
        //do nothing
      });
      return false;
    });

   // xyz movement to next well ( 6 cm or 7 cm )
   $('a#nextleft').bind('click', function() {
      $.getJSON('/move_deg?xyz_position=0&xyz_position=140000&xyz_position=0',
          function(data) {
        //do nothing
      });
      return false;
    });
    // - Motor - 90°
    $('a#nextup').bind('click', function() {
      $.getJSON('/move_deg?xyz_position=140000&xyz_position=0&xyz_position=0',
          function(data) {
        //do nothing
      });
      return false;
    });
    // - Motor - 180°
    $('a#nextright').bind('click', function() {
      $.getJSON('/move_deg?xyz_position=0&xyz_position=-140000&xyz_position=0',
          function(data) {
        //do nothing
      });
      return false;
    });
    // - Motor - 270°
    $('a#nextdown').bind('click', function() {
      $.getJSON('/move_deg?xyz_position=-140000&xyz_position=0&xyz_position=0',
          function(data) {
        //do nothing
      });
      return false;
    });

    $('a#href_zoom_out').bind('click', function() {
      $.getJSON('/move_deg?xyz_position=0&xyz_position=0&xyz_position=-5000',
          function(data) {
        //do nothing
      });
      return false;
    });
    $('a#href_zoom_in').bind('click', function() {
      $.getJSON('/move_deg?xyz_position=0&xyz_position=0&xyz_position=5000',
          function(data) {
        //do nothing
      });
      return false;
    });
    $('a#href_add_position').bind('click', function() {
      $.getJSON('/add-position',
          function(data) {
        //do nothing
      });
      return false;
    });

    // - Gallery
    $('a#href_gallery').bind('click', function() {
      $.getJSON('/gallery',
          function(data) {
        //do nothing
      });
      return false;
    });

    // - picture
    $('a#picture').bind('click', function() {
      $.getJSON('/picture',
          function(data) {
        //do nothing
      });
      return false;
    });

    // - take picture, yolo analysis and movement to center to recognized object
    $('a#yolo-search-go').bind('click', function() {
      $.getJSON('/yolo-search-go',
          function(data) {
        //do nothing
      });
      return false;
    });

    // - led
    $('a#led').bind('click', function() {
      $.getJSON('/led',
          function(data) {
        //do nothing
      });
      return false;
    });

  });    
  </script>

<script type="text/javascript">
  
var button = document.getElementById('button');

button.onclick = function() {
    var div = document.getElementById('newpost');
    if (div.style.display !== 'none') {
        div.style.display = 'none';
    }
    else {
        div.style.display = 'block';
    }
};
</script>


<!-- toggle switch script -->
<!-- <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script> -->
<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
<!-- <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script> -->
<link href="https://gitcdn.github.io/bootstrap-toggle/2.2.2/css/bootstrap-toggle.min.css" rel="stylesheet">
<script src="https://gitcdn.github.io/bootstrap-toggle/2.2.2/js/bootstrap-toggle.min.js"></script>

<script>
  $(document).ready(function() {
    $('.toggle').click(function() {
    var current_status = $('.status').text();
    $.ajax({
      url: "/get_toggled_status",
      type: "get",
      data: {status: current_status},
      success: function(response) {
        $(".status").html(response);
      },
      error: function(xhr) {
        //Do Something to handle error
      }
    });
    });
  });
</script>

{% endblock javascripts %}